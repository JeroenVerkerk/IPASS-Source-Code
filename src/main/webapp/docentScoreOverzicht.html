<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/docentScoreOverzicht.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quiz Overzicht</title>
</head>
<body>
<div id="header">
	<i id="menu" onclick="openNav()" class="fa fa-bars"></i>
    <h1>Cijfer Overzicht</h1>
</div>
<div id="mySidenav" class="sidenav">
  <a id="close" href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="home.html"><i class="fa fa-home"> Home</i></a>
  <a id="quizCreator" href="quizCreator.html"><i class="fa fa-plus"> Quiz Maken</i></a> 
  <a href="quizOverzicht.html" id="leerling"><i class="fa fa-question-circle"> Quiz Overzicht</i></a>
  <a href="docentQuizOverzicht.html" id="docent"><i class="fa fa-question-circle"> Quiz Overzicht</i></a>  
  <a href="scoreOverzicht.html" id="leerlingScore"><i class="fa fa-list"> Cijfer Overzicht</i></a>
  <a class="active" href="docentScoreOverzicht.html" id="docentScore"><i class="fa fa-list">Cijfer Overzicht</i></a> 
</div>
<div id="main">
<table id="filters">
	<tr>
		<td><input type="text" onkeyup="sortQuizNaam()" id="filterNaam" class="filter" placeholder="Zoek op Quiz Naam..."/></td>
		<td><input type="text" onkeyup="sortLeerlingnummer()" id="filterLeerlingnummer" class="filter" placeholder="Zoek op Leerlingnummer..."/></td>
		<td><input type="text" onkeyup="sortDatum()" id="filterDatum" class="filter" placeholder="Zoek op Datum..."/></td>
	</tr>
</table>
<table id="quizzes">
<thead>
	<tr>
		<th>Naam</th>
		<th>Leerlingnummer</th>
		<th>Cijfer</th>
		<th>Datum</th>
	</tr>
</thead>
<tbody></tbody>
</table>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
<script>
var role = window.sessionStorage.getItem("Role");
function initPage() {
	if (role == "leerling") {
		$("#quizCreator").hide();
		$("#docent").hide();
		$("#docentScore").hide();
	}
	else if (role == "docent") {
		$("#leerling").hide();
		$("#leerlingScore").hide();
	}
		
	$.get("/restservices/quizzes/byDocent/"+window.sessionStorage.getItem("DocentNaam"), function(data) {
		$.each(data, function(i, quiz) {
			var quizId = quiz.QuizId;
			
			getScores(quizId);
		});
	});
}

function getScores(quizId) {
	$.get("/restservices/scores/docent/"+quizId, function(data) {
		$.each(data, function(i, score) {
			var naam = score.QuizNaam;
			var leerlingnummer = score.Leerlingnummer;
			var cijfer = score.Score;
			var datum = score.Datum
			$("#quizzes").append("<tr><td>"+ naam +"</td><td>" + leerlingnummer + "</td><td>" + cijfer + "</td><td>" + datum + "</td></tr>");
		});
	});	
}

/* Set the width of the side navigation to 250px */
function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
    document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
}

/* Set the width of the side navigation to 0 */
function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.body.style.backgroundColor = "white";
}


	function sortQuizNaam() {
		// Declare variables 
		var input, filter, table, tr, td, i;
		input = document.getElementById("filterNaam");
		filter = input.value.toUpperCase();
		table = document.getElementById("quizzes");
		tr = table.getElementsByTagName("tr");

		// Loop through all table rows, and hide those who don't match the search query
		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[0];
			if (td) {
				if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
					tr[i].style.display = "";
				} else {
					tr[i].style.display = "none";
				}
			}
		}
	}

	function sortLeerlingnummer() {
		// Declare variables 
		var input, filter, table, tr, td, i;
		input = document.getElementById("filterLeerlingnummer");
		filter = input.value.toUpperCase();
		table = document.getElementById("quizzes");
		tr = table.getElementsByTagName("tr");

		// Loop through all table rows, and hide those who don't match the search query
		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[1];
			if (td) {
				if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
					tr[i].style.display = "";
				} else {
					tr[i].style.display = "none";
				}
			}
		}
	}

	function sortDatum() {
		// Declare variables 
		var input, filter, table, tr, td, i;
		input = document.getElementById("filterDatum");
		filter = input.value.toUpperCase();
		table = document.getElementById("quizzes");
		tr = table.getElementsByTagName("tr");

		// Loop through all table rows, and hide those who don't match the search query
		for (i = 0; i < tr.length; i++) {
			td = tr[i].getElementsByTagName("td")[3];
			if (td) {
				if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
					tr[i].style.display = "";
				} else {
					tr[i].style.display = "none";
				}
			}
		}
	}

	window.onload = initPage;
</script>
</html>
